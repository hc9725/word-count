#include "wordinsert.h"
#include "dbllink.h"

void wordinsert(Dlinklist list, char *word, int islistempty)
{
	Dlinklist list1 = list->next;
	int doexchange = 0;
	//static int listempty = 1;
	if(1 == islistempty )
	{
		STWD *st = malloc(sizeof(STWD));
			st->frq = 1;
		//	st->word = malloc(20*sizeof(char *));
			//printf("%s ",word);
		//	printf("\nlsllsls%s\n",word);
			sprintf(st->word,"%s", word);
			dinsertbefore(list,st);	
	}
	else
	{
		while(0 == doexchange && list1->data != NULL )
		{
			if(cmp_list_word(list1->data,word) == 0)
			{
				STWD *pst = (STWD *)list1->data;
				pst->frq +=1;
				doexchange = 1;
			}	
			list1 = list1->next;
		}
		if(doexchange != 1)
		{
			STWD *st = malloc(sizeof(STWD));
			st->frq = 1;
		//	st->word = malloc(20*sizeof(char *));
			//printf("%s ",word);
			sprintf(st->word,"%s", word);
			dinsertbefore(list,st);
		}
		//listempty = 0;
	}
}

int cmp_list_word(const void *a, const void *b)
{
	STWD *p1 = (STWD *)a;
	//STWD *p2 = (STWD *)b;
	char *p2 = (char *)b;
	return  strcmp((const char *)p1->word, p2);
//	printf("%d",i);
//	return i;
}
